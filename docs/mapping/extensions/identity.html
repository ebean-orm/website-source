<html>
<head>
  <title>@Identity | Mapping | Ebean</title>
  <meta name="layout" content="_layout2/base-mapping-extn.html"/>
  <meta name="bread3" content="@Identity" href="/docs/mapping/"/>
  <#assign Identity="active">
</head>
<body>
<h2 id="identity">@Identity</h2>
<p>
  With <em>@Identity</em> we can specify additional attributes for database identity and sequences
  and we can additionally apply this on the class level or on the property level.
</p>
<p>
  It is useful to be able to specify <code>@Identity</code> on the class level when using
  <code>@MappedBy</code> and the @Id property is inherited.
</p>
<p>
  The additional properties we can specify include:
</p>
<ul>
  <li><b>start</b> - start value</li>
  <li><b>cache</b> - cache value (performance optimisation)</li>
  <li><b>generatedBy</b> - By DEFAULT or ALWAYS</li>
</ul>

<p>&nbsp;</p>
<h3>Example use on class</h3>
<pre content="java">
@Identity(generated = BY_DEFAULT, start = 1000, cache = 100)
@Entity
public class AuditLog {
  ...
</pre>

<h3>Example use on property</h3>
<pre content="java">
@Entity
public class AuditLog {

  @Id
  @Identity(generated = BY_DEFAULT, start = 10000, cache = 1000)
  long id;
  ...
</pre>

<p>&nbsp;</p>
<h3>start value</h3>
<p>
  The <em>start</em> value is supported in DDL generation for H2, Postgres, Oracle
  and SQL Server sequences.
</p>

<p>&nbsp;</p>
<h3>cache value</h3>
<p>
  The <em>cache</em> value is an important performance optimisation available in some databases
  for tables that will have a lot of inserts. This specifies how many identity values the
  database should generate and cache ahead of time reducing the internal locking the database
  uses. Databases supporting this include Postgres, Oracle & NuoDB.
</p>
<h2 id="application">@Identity(type = APPLICATION)</h2>
<p>
  We can use the ebean <code>@Identity</code> annotation with type set to <code>APPLICATION</code>
  to explicitly specify that the id value will be supplied by the application rather than
  generated by Database Identity or Sequence.
</p>
<pre type="java">
  @Id @Identity(type=APPLICATION)
  long id;
</pre>

</body>
</html>
